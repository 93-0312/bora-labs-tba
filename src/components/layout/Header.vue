<template>
  <header
    class="flex items-center justify-between sticky top-0 z-10 h-16 px-5 bg-base-100 md:h-20 md:px-7"
  >
    <a href="/" class="flex items-center font-bold text-lg">
      <!-- prettier-ignore -->
      <svg width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-1.5">
        <path d="M11.4147 7.12843L7.62 9.31929V13.5207C7.62 13.6087 7.71522 13.6637 7.7914 13.6197L11.3728 11.552C11.4082 11.5316 11.43 11.4938 11.43 11.453V7.1855C11.43 7.1651 11.4246 7.1455 11.4147 7.12843Z" fill="url(#paint0_linear_616_9658)"/>
        <path d="M3.9815 7.21856L5.25504 7.95383L7.62003 9.31928L11.4147 7.12842C11.4049 7.11134 11.3906 7.09682 11.3729 7.08658L7.67714 4.95283C7.64179 4.93243 7.59824 4.93243 7.56288 4.95283L5.1259 6.35983L3.98146 7.02055C3.90527 7.06455 3.90531 7.17457 3.9815 7.21856Z" fill="url(#paint1_linear_616_9658)"/>
        <path d="M3.81003 0.114344C3.81003 0.0263593 3.71484 -0.0286313 3.63862 0.0153612L0.0570703 2.08317C0.0217564 2.1036 0 2.14132 0 2.18211V13.6528C0 13.6732 0.00543889 13.6928 0.0153172 13.7099L3.81003 11.5191V7.11962V0.114344Z" fill="url(#paint2_linear_616_9658)"/>
        <path d="M0.0152985 13.7099C0.0251368 13.7269 0.0394149 13.7415 0.0570119 13.7517L3.7529 15.8855C3.78825 15.9059 3.83181 15.9059 3.86716 15.8855L7.44858 13.8177C7.52477 13.7737 7.52477 13.6638 7.44858 13.6198L3.80997 11.519L0.0152985 13.7099Z" fill="url(#paint3_linear_616_9658)"/>
        <defs>
        <linearGradient id="paint0_linear_616_9658" x1="8.60103" y1="8.75291" x2="10.506" y2="12.0525" gradientUnits="userSpaceOnUse">
        <stop stop-color="#FF00FF"/>
        <stop offset="1" stop-color="#9D00FF"/>
        </linearGradient>
        <linearGradient id="paint1_linear_616_9658" x1="6.69607" y1="5.45334" x2="8.60107" y2="8.7529" gradientUnits="userSpaceOnUse">
        <stop stop-color="#FF00FF"/>
        <stop offset="1" stop-color="#9D00FF"/>
        </linearGradient>
        <linearGradient id="paint2_linear_616_9658" x1="4.38857" y1="11.185" x2="-0.635534" y2="2.48302" gradientUnits="userSpaceOnUse">
        <stop stop-color="#00FFBE"/>
        <stop offset="1" stop-color="#603CF7"/>
        </linearGradient>
        <linearGradient id="paint3_linear_616_9658" x1="4.73401" y1="15.385" x2="2.82902" y2="12.0854" gradientUnits="userSpaceOnUse">
        <stop stop-color="#00FFBE"/>
        <stop offset="1" stop-color="#508CFF"/>
        </linearGradient>
        </defs>
      </svg>
      <!-- prettier-ignore -->
      <svg xmlns="http://www.w3.org/2000/svg" width="45" height="12" viewBox="0 0 45 12" fill="none" class="hidden md:block md:mr-1">
        <path d="M1.07087 11.8729H0.504883V0.262937H1.62234V10.7555H8.61735V11.8729H1.07087Z" fill="black"/>
        <path d="M16.2152 0.132324L21.846 11.8729H20.685L19.4225 9.33323H12.9789L11.7599 11.8729H10.5844L16.2152 0.132324ZM13.5159 8.21577H18.871L16.1572 2.70103L13.5159 8.21577Z" fill="black"/>
        <path d="M25.2773 11.8729H24.2905V0.262937H25.3934H29.4714C29.8923 0.262937 30.3132 0.335499 30.705 0.495136C31.0823 0.654773 31.4306 0.886973 31.7354 1.16271C32.0401 1.45296 32.2869 1.78675 32.4465 2.16407C32.6352 2.55591 32.7222 2.97677 32.7222 3.39763C32.7222 3.81849 32.6352 4.23935 32.4465 4.63119C32.2723 5.03754 31.9821 5.48743 31.5903 5.74865C31.924 5.90829 32.2143 6.11146 32.4755 6.35818C32.7803 6.64842 33.027 6.99672 33.2011 7.37405C33.3898 7.7804 33.4914 8.20126 33.4914 8.65115C33.4914 9.08652 33.3898 9.50738 33.2011 9.91373C33.027 10.2911 32.7803 10.6394 32.4755 10.9296C32.1708 11.2199 31.8079 11.4521 31.4161 11.6117C31.0098 11.7858 30.5889 11.8729 30.1535 11.8729H25.2773ZM25.3934 1.36588V5.42938H29.4714C30.0084 5.42938 30.5599 5.19718 30.9662 4.81985C31.3871 4.42802 31.6048 3.92008 31.6048 3.39763C31.6048 2.87518 31.3871 2.36724 30.9662 1.97541C30.5599 1.59808 30.0084 1.36588 29.4714 1.36588H25.3934ZM25.3934 6.53232V10.7555H30.1535C30.7195 10.7555 31.2855 10.5233 31.7064 10.1169C32.1417 9.72507 32.3739 9.20262 32.3739 8.65115C32.3739 8.09967 32.1417 7.57722 31.7064 7.17087C31.2855 6.76452 30.7195 6.53232 30.1535 6.53232H25.3934Z" fill="black"/>
        <path d="M43.9739 10.6829C43.5095 11.1618 42.842 11.5246 42.0728 11.7423C41.5213 11.9019 40.9118 11.9745 40.3023 11.9745C39.7363 11.9745 39.1703 11.9019 38.6188 11.7713C38.0383 11.6262 37.5014 11.394 37.0515 11.1038C36.5435 10.7845 36.1517 10.3926 35.876 9.94276L36.8193 9.36226C37.1966 9.97178 37.9367 10.4507 38.8946 10.6829C39.8379 10.9296 40.8828 10.9151 41.768 10.6684C42.363 10.5087 42.842 10.233 43.1757 9.89922C43.5095 9.56543 43.6837 9.14457 43.6837 8.66566C43.6837 8.44797 43.6256 8.25931 43.495 8.08516C43.3644 7.8965 43.1467 7.72235 42.871 7.5482C42.2905 7.1999 41.4778 6.92416 40.6941 6.66294C40.6796 6.66294 40.6796 6.66294 40.6651 6.66294C40.3603 6.56135 40.041 6.45976 39.7508 6.34366C38.9526 6.08244 38.1399 5.8067 37.4723 5.41486C37.0805 5.18266 36.7903 4.92144 36.5726 4.61668C36.3113 4.26838 36.1807 3.86203 36.1807 3.42666C36.1807 2.68652 36.4565 2.01895 36.9789 1.48198C37.4143 1.0321 38.0528 0.683798 38.793 0.480623C39.8234 0.190373 41.0134 0.175861 42.0873 0.451598C42.6533 0.58221 43.1467 0.799898 43.5821 1.07563C44.0755 1.3804 44.4528 1.75772 44.7141 2.20761L43.7708 2.78811C43.4079 2.20761 42.7259 1.75772 41.8116 1.52552C40.9263 1.30783 39.9395 1.30783 39.0977 1.54003C38.5318 1.69967 38.0819 1.94638 37.7626 2.26566C37.4578 2.58493 37.2982 2.97677 37.2982 3.42666C37.2982 3.93459 37.7045 4.25387 38.0528 4.45704C38.5898 4.79083 39.3445 5.03754 40.0701 5.28425C40.0846 5.28425 40.0991 5.28425 40.1136 5.29876C40.1281 5.29876 40.1281 5.29876 40.1426 5.29876C40.4329 5.40035 40.7376 5.50194 41.0279 5.60353C41.8841 5.89378 42.7549 6.16951 43.4515 6.59037C43.8578 6.8516 44.1771 7.11282 44.3948 7.41759C44.6705 7.79491 44.8011 8.21577 44.8011 8.66566C44.8011 9.43482 44.5109 10.1314 43.9739 10.6829Z" fill="black"/>
      </svg>
      TBA
      <span
        class="badge badge-xs badge-neutral h-4 ml-1.5 rounded-lg font-normal md:ml-2 md:badge-sm md:h-5 md:rounded-xl"
        >Beta</span
      >
    </a>

    <SignBtn />
  </header>
</template>

<script setup lang="ts">
import SignBtn from '@/components/service/SignBtn.vue'
import { setupAsset } from '@/setups/asset.composition'
import { useAccountStore } from '@/stores/account.module'
import { storeToRefs } from 'pinia'
import { onMounted, watch } from 'vue'

const accountStore = useAccountStore()

const { tbaMint, checkAsset, tbaMintStep, tbaMintDesc } = setupAsset()
const { isSigned } = storeToRefs(accountStore)

watch(
  () => isSigned.value,
  async (isSigned: boolean) => {
    if (isSigned) await checkAsset()
    else if (!isSigned) {
    }
  },
  { immediate: true }
)
</script>
